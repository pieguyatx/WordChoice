var numSentences=rawData.length;var wordsAll={};for(var indexS=0;indexS<numSentences;indexS++){var currentSentence=rawData[indexS].sentence;var currentWords=currentSentence.split(" ");currentWords=removePunctuation(currentWords);var numWords=currentWords.length;var currentOrder=0;wordsAll=populateWordTree(wordsAll,currentWords);}
function removePunctuation(wordArray){var punctuationUndesired=[".",",","!","?"];for(let i=0;i<wordArray.length;i++){for(let j=0;j<punctuationUndesired.length;j++){wordArray[i]=wordArray[i].replace(punctuationUndesired[j],"");}
wordArray[i]=wordArray[i].replace("_"," ");}
wordArray=wordArray.filter(Boolean);return wordArray;}
function countElementsInObject(obj){var count=0;for(var elem in obj){if(obj.hasOwnProperty(elem)){count++;}}
return count;}
function checkIfWordPresent(wordToCheck,objSetOfWords,numWordsInSet){var wordFound=false;for(let elem=0;elem<numWordsInSet;elem++){var existingWordProperty=String.fromCharCode(elem+65);if(wordToCheck.toLowerCase()===objSetOfWords[existingWordProperty].word.toLowerCase()){wordFound=true;break;}}
return[wordFound,existingWordProperty];}
function populateWordTree(workingLayer,workingWords){var currentWord=workingWords[currentOrder];var nChoices=countElementsInObject(workingLayer);var wordFound=checkIfWordPresent(currentWord,workingLayer,nChoices);if(wordFound[0]===false){let propertyName=String.fromCharCode(nChoices+65);workingLayer[propertyName]={};workingLayer[propertyName].word=currentWord;workingLayer[propertyName].order=currentOrder+1;var nextWorkingLayer={};if(currentOrder<(numWords-1)){workingLayer[propertyName].next={};nextWorkingLayer=workingLayer[propertyName].next;currentOrder++;populateWordTree(nextWorkingLayer,workingWords);}
else if(currentOrder===(workingWords.length-1)){workingLayer[propertyName]["numWords"]=numWords;workingLayer[propertyName].numHits=rawData[indexS].numHits;workingLayer[propertyName].link=rawData[indexS].link;workingLayer[propertyName].yearRecorded=rawData[indexS].yearRecorded;workingLayer[propertyName].accessYear=rawData[indexS].accessYear;workingLayer[propertyName].accessMonth=rawData[indexS].accessMonth;workingLayer[propertyName].sentence=rawData[indexS].sentence;}}
else if(wordFound[0]===true){nextWorkingLayer=workingLayer[wordFound[1]].next;currentOrder++;populateWordTree(nextWorkingLayer,workingWords);}
return workingLayer;}
